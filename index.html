<!DOCTYPE html>
<html>

<head>
    <title>Spotify</title>
    <script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>
</head>

<body>
    <h1>Spotify</h1>
    <h2>Open your console log</h2>

    <iframe id="spotify-iframe" src="" width="300" height="380" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe>

    <script src="https://sdk.scdn.co/spotify-player.js"></script>.
    <script>
        window.onSpotifyWebPlaybackSDKReady = () => {
            var musicUrl = "https://accounts.spotify.com/authorize/?"
            window.location = musicUrl + "client_id=f2e2d50aac134850a09128c2646b8c0a&response_type=token&redirect_uri=https://danthamaz.github.io/spotifyTest/"
            var token = "BQCMWJmzWNOG0LQcPDx7PfIvjMJfbk5dOLb56OjM5p_to47_C6mcYr3t2ZSXMQ_lcmPEGacX5U6i0FcT_Baa6PqBmnZMaBCKBZOpAEHyhiTEitqq7KAmuNxBBiYROoSuPUVjivhe6dubLDG8AP2eEGEqeqQtO3mA_A";

            var musicUrl = "https://api.spotify.com/v1/search?query=queen&limit=1&type=artist"
            $.ajax({
                url: musicUrl,
                method: 'GET',
                headers: {
                    'Authorization': 'Bearer ' + token
                },
                success: function (response) {
                    console.log(response);
                    //console.log(response.artists.items[0].id);

                    var artistId = response.artists.items[0].id;
                    var source = "https://open.spotify.com/embed?uri=spotify:artist:" + artistId;

                    $("#spotify-iframe").attr("src", source);

                },
                error: function () {
                    console.log("Error with ajax GET");
                }
            });
        };

    </script>
</body>
</html>